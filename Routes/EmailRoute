const express = require("express");
const emailRouter = express.Router();
const emailCtrl = require("../Controllers/sendEmail");

emailRouter.use((req, res, next) => {
  var allowedDomains = ["http://localhost:3001", "http://localhost:8080"];
  var origin = req.headers.origin;
  if (allowedDomains.indexOf(origin) > -1) {
    res.setHeader("Access-Control-Allow-Origin", origin);
  }
  res.setHeader("Access-Control-Allow-Origin", origin);
  next();
});
emailRouter.post("/", emailCtrl.sendEmail);

module.exports = emailRouter;
